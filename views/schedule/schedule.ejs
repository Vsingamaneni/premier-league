<!DOCTYPE html>
<html lang="en">
<head>
    <title><%= title %></title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/schedule.css">
    <%- include('../header.ejs') %>
</head>
<body style="background-color: #f6f7fa;">

<%
    localDateConverted = function(dateString){
        return new Date(dateString).toLocaleDateString() + " " + new Date(dateString).toLocaleTimeString();
    }
%>

<%
localOffset = function() {
    var dt = new Date();
    return dt.getTimezoneOffset();
}
 %>

<div>
    <%- include('../body.ejs') %>
    <div class="content" style="background-color:#f6f7fa">
        <br><br><br><br><br><br>
        <div class="container">
            <table class="table table-dark table-striped">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Fixture</th>
                    <th>Match Time</th>
                    <th>Current Time</th>
                    <th>Offset</th>
                    <th>Venue</th>
                    <th>Result</th>
                </tr>
                </thead>
                <tbody>
                <tr style="height: 10px;"></tr>
                <% for (const [key, value] of scheduleMap.entries()) { %>
                    <%  value.forEach(function(game){ %>
                        <tr>
                            <td><%= game.matchDay %></td>
                            <td><%= game.homeTeam %> vs <%= game.awayTeam %></td>
                            <td><%= localDateConverted( game.matchTime) %></td>
                            <td><%= new Date().toLocaleDateString() + " " + new Date().toLocaleTimeString() %></td>
                            <td><%= localOffset() %></td>
                            <td><%= game.venue %></td>
                            <td> <% if (game.winner !== undefined) { %>
                                    <%=  game.winner %>
                                <% } %>
                                <% if (game.winner == undefined) { %>
                                    TBP
                                <% } %>
                            </td>
                        </tr>
                    <% }); %>
                    <tr style="height: 20px;"></tr>
                <% } %>


                </tbody>
            </table>
        </div>

    </div>
</div>

</body>
</html>